(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{3815:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/development-guide/tooling-service-development",function(){return i(6040)}])},6040:function(e,n,i){"use strict";i.r(n),i.d(n,{__toc:function(){return h},default:function(){return u}});var o=i(5893),t=i(2673),s=i(2643),r={src:"/_next/static/media/tooling-service-direct-communication.b9b57bd7.png",height:902,width:1220,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAARVBMVEX///////7+/v7+/f39/f36+vr49vb49fXq9fry8vLs8/nw8vPu7+/m7PDo6Ons3NvR5fPI5/br19Xa3d/R1tm8z9zExMiXxXNdAAAALUlEQVR42gXAhQ3AMAADMC9j5v5/auXfRfBt2k7iWpyPfnZPzTBKlAPBu0okFR+yARK9PY3GAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},l={src:"/_next/static/media/tooling-service-communication.4b31055a.png",height:1078,width:2098,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAWklEQVR42h3LSw6AIAwAUe5/P7e6MWoUI9jyaUuLxFlO8tyy7ilXwMpMah0Abu9ba26+EFMGQFWjEgtCPA4WcdOyEZPUQBUpB21i1kcuhsAswzzvqdrt32b2AeSmXDC63QzSAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},a={src:"/_next/static/media/tooling-service-internal-communication-1.00c0fb95.png",height:628,width:942,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAAAAABd+vKJAAAAKklEQVR42iXGwQ3AMAwDMe+/sAqfpAZB+OI0lkin+aEvn27impLZxUZ7AHbTJ14n1O+7AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},c={src:"/_next/static/media/tooling-service-internal-communication-2.57e5fc89.png",height:1220,width:1992,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAAAAABd+vKJAAAAKUlEQVR42gWAgQ0AIAjD9v+9GiKMzgjm1oLANbso2Xohsj12W68G+vQHdhMnUnnMdhUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:5};let h=[{depth:2,value:"Table of Contents",id:"table-of-contents"},{depth:2,value:"External Communication",id:"external-communication"},{depth:3,value:"Communication without Tooling Service",id:"communication-without-tooling-service"},{depth:3,value:"Communication via Tooling Services",id:"communication-via-tooling-services"},{depth:4,value:"Synchronous Communication via RESTful API",id:"synchronous-communication-via-restful-api"},{depth:4,value:"Asynchronous Commnication via Message Queue",id:"asynchronous-commnication-via-message-queue"},{depth:2,value:"Internal Communication",id:"internal-communication"},{depth:2,value:"Development Guide",id:"development-guide"},{depth:3,value:"How to implement Restful API",id:"how-to-implement-restful-api"},{depth:3,value:"How to implement a Service Provider",id:"how-to-implement-a-service-provider"},{depth:3,value:"How to implement Restful API",id:"how-to-implement-restful-api-1"},{depth:3,value:"How to implement Queue Processor",id:"how-to-implement-queue-processor"}];function d(e){let n=Object.assign({h1:"h1",h2:"h2",ul:"ul",li:"li",a:"a",p:"p",h3:"h3",img:"img",strong:"strong",code:"code",h4:"h4",em:"em"},(0,s.a)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{children:"Tooling Services Development"}),"\n",(0,o.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#external-communication",children:"External Communication"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#communication-without-tooling-service",children:"Communication without Tooling Service"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#communication-via-tooling-services",children:"Communication via Tooling Services"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#synchronous-communication-via-restful-api",children:"Synchronous Communication via RESTful API"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#asynchronous-commnication-via-message-queue",children:"Asynchronous Communication via Message Queue"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#internal-communication",children:"Internal Communication"})}),"\n",(0,o.jsxs)(n.li,{children:["Development Guide","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"How to implement a Service Provider"}),"\n",(0,o.jsx)(n.li,{children:"How to implement Restful API"}),"\n",(0,o.jsx)(n.li,{children:"How to implement Queue Processor"}),"\n",(0,o.jsx)(n.li,{children:"How to implement Cron Queue"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This document illustrates the external and internal communication of Tooling Service."}),"\n",(0,o.jsx)(n.h2,{id:"external-communication",children:"External Communication"}),"\n",(0,o.jsx)(n.h3,{id:"communication-without-tooling-service",children:"Communication without Tooling Service"}),"\n",(0,o.jsx)(n.p,{children:"The following diagram decribes how our ERP System works together without Tooling Service."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Call directly to Service Gate",placeholder:"blur",src:r})}),"\n",(0,o.jsxs)(n.p,{children:["As can be seen that all clients such as Mobile App, ERP Web or other API Clients like Postman interact with our system through Main Services (Service Gate) and receive the response in ",(0,o.jsx)(n.strong,{children:"synchronous communication"})," way. This synchronous communication approach has an advantage, allowing clients to retrieve the result from the server in ",(0,o.jsx)(n.code,{children:"realtime"}),". However, it also has a downside that if the Main Services are trying to process ",(0,o.jsx)(n.strong,{children:"a heavy task"}),", it can ",(0,o.jsx)(n.strong,{children:"delay the clients receiving the output"})," and causes a poor UX experience."]}),"\n",(0,o.jsx)(n.h3,{id:"communication-via-tooling-services",children:"Communication via Tooling Services"}),"\n",(0,o.jsxs)(n.p,{children:["In order to resolve the ",(0,o.jsx)(n.strong,{children:"delayed"})," issue when communicating synchronously, Tooling Service jumps into the play."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Calling via Tooling Service",placeholder:"blur",src:l})}),"\n",(0,o.jsx)(n.p,{children:"According to the diagram, the clients now interacting with the ERP System via RESTful API endpoint that exposes from Tooling Services. In general, Tooling Services supports two way of communication"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Synchronous via RESTful API."}),"\n",(0,o.jsx)(n.li,{children:"Asynchronous via Message Queue that facilitates the Pub-Sub pattern"}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"synchronous-communication-via-restful-api",children:"Synchronous Communication via RESTful API"}),"\n",(0,o.jsx)(n.p,{children:"There're two use cases of synchronous communication via RESTful API"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Sending a message to a message queue via Publisher."}),"\n",(0,o.jsxs)(n.li,{children:["Calling Main Services API for some business customization: This approach is used when you want to customize the request before sending to our main services or doing some pre-calculation before hand. Basically, this way keeps the implementation in Main Service reusable internally and avoid ",(0,o.jsx)(n.code,{children:"Anti-IF"})," pattern."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["For example, ",(0,o.jsx)(n.strong,{children:"Converting Image to Pdf"})," is not a responsibility of Main Services. Therefore, you can develop this feature in Tooling Services and exposes via RESTful API."]}),"\n",(0,o.jsxs)(n.p,{children:["Another example for ",(0,o.jsx)(n.strong,{children:"Caching"}),", you want to cache the response from the Main Services for the next query. You can use Tooling Service as a ",(0,o.jsx)(n.em,{children:"Reversed Proxy"}),", forward the client request to main service and cache the response into caching database that Tooling Services is integrating with. With this use case, The performance of our system will be significantly improved."]}),"\n",(0,o.jsx)(n.h4,{id:"asynchronous-commnication-via-message-queue",children:"Asynchronous Commnication via Message Queue"}),"\n",(0,o.jsxs)(n.p,{children:["Just want to emphasize that this process happens after the ",(0,o.jsx)(n.strong,{children:"Publisher"})," and ",(0,o.jsx)(n.strong,{children:"Cron"})," add new message into the ",(0,o.jsx)(n.strong,{children:"Message Queue"}),". Then, Subcribers will perform the business logic and returns the response in background. In addition, you can monitor the process and result by using Bull Board at ",(0,o.jsx)(n.a,{href:"http://127.0.0.1/admin/queues",children:"http://127.0.0.1/admin/queues"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"When it comes to the implementation in Subcriber component, it can be developed indenpendently or dependent on Main Services to serve some heavy business task purposes."}),"\n",(0,o.jsx)(n.p,{children:"For example, The PO Signature use case, just consider the CEO is busy all the time so he wants to sign all **Purchase Order Approval **in the fastest way, so the mobile should not wait the server to validate the signature, mark the approval and upload the document to the cloud. Consequently, we should response our CEO the status as approval is processing immediately and allows him to sign the next one. For the unprocessed server tasks, we can delegate them to a queue and execute them later on."}),"\n",(0,o.jsx)(n.h2,{id:"internal-communication",children:"Internal Communication"}),"\n",(0,o.jsx)(n.p,{children:"There're four main components in Tooling Services project"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"shared"}),": To store all common use lib that share with among components in this project"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"service"}),": To store all ",(0,o.jsx)(n.code,{children:"main or business logic"})," of a service that will be used in ",(0,o.jsx)(n.code,{children:"api"})," or ",(0,o.jsx)(n.code,{children:"queue"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"api"}),": To store the implementation that exposes the gateway to the clients via the RESTful API endpoints"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"queue"}),": To store the implementation that will work in the background. It will be triggered by ",(0,o.jsx)(n.code,{children:"api"})," or by itself via ",(0,o.jsx)(n.code,{children:"cron"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Please see the diagram below for more details"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Internal Communication Overview",placeholder:"blur",src:a})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Internal Communication In Detail",placeholder:"blur",src:c})}),"\n",(0,o.jsx)(n.p,{children:"In general, you can understand the internal communication like following:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["All components can use all modules in ",(0,o.jsx)(n.code,{children:"shared"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"api"})," and ",(0,o.jsx)(n.code,{children:"queue"})," must use ",(0,o.jsx)(n.code,{children:"service"})," for the business implementation."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"development-guide",children:"Development Guide"}),"\n",(0,o.jsx)(n.h3,{id:"how-to-implement-restful-api",children:"How to implement Restful API"}),"\n",(0,o.jsx)(n.p,{children:"Updating..."}),"\n",(0,o.jsx)(n.h3,{id:"how-to-implement-a-service-provider",children:"How to implement a Service Provider"}),"\n",(0,o.jsx)(n.p,{children:"Updating..."}),"\n",(0,o.jsx)(n.h3,{id:"how-to-implement-restful-api-1",children:"How to implement Restful API"}),"\n",(0,o.jsx)(n.p,{children:"Updating..."}),"\n",(0,o.jsx)(n.h3,{id:"how-to-implement-queue-processor",children:"How to implement Queue Processor"}),"\n",(0,o.jsx)(n.p,{children:"Updating..."})]})}var u=(0,t.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.a)(),e.components);return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/development-guide/tooling-service-development.mdx",route:"/development-guide/tooling-service-development",title:"Tooling Services Development",headings:h},pageNextRoute:"/development-guide/tooling-service-development"})}},function(e){e.O(0,[673,888,774,179],function(){return e(e.s=3815)}),_N_E=e.O()}]);